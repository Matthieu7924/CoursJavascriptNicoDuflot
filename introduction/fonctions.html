<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation Javascript Ecmascript</title>
    <link rel="stylesheet" href="../css/bootstrap.css" />
    <script src="../js/bootstrap.bundle.js"></script>
    <script>
        /*
        il existe  deux types de fonction : les fonctions et les méthodes : 
            - les méthodes sont des fonctions déclarées et utilisées via : 
                - des instances de classe (objets créés par cette classe)
                - la classe directement quand cette méthode est statique dans la classe
            - les fonctions sont déclarées dans le programme ou dans un script.
                Elle sont utilisables directement sans passer par des objets

        de base, on utilise le mot clef function, puis le nom de la fonction, des parenthèse pour les paramètres (qu'il y en ait ou non)
        enfin des acolades dans lequelles on a le code de la fonction

        Les fonctions peuvent retourner un résultat ou directement agir sans retour vers l'appel de la fonction.
        
        fonction "simple" (sans paramètres d'appel) 
        */

        function helloWorld()
        {
            return 'Hello World';
        }

        console.log(helloWorld());

        /*
        fonction avec des variables en paramètre
        l'écriture @param permet de définir à l'utilisateur de la fonction
        le type des arguments attendues
        */
       
        /**
         * @param {string} prenom - The string
         * @param {string} nom - The string
         * @param {number} age - The string
        */
        function helloYou(prenom, nom, age){
            return `Hello ${prenom} ${nom}, looking good for a ${age} years old ;)`;
        }

        console.log(helloYou('Nicolas', 'Duflot', 42));

        /*
        quand on utilise sur un tableau la méthode .push()
        let tab = [];
        tab.push('ha ha');
        tab.push('hi hi', 'ho ho');
        => tab n'admet en fait qu'un seul paramètre, mais c'est un type particulier de paramètre => il utilise un 
        opérateur variadique ou aussi appelé spread parameter

        tab.push('a', 'b', 'c') => 
        les paramètres a, b et c sont traité les uns après les autres, sous la forme ['a', 'b', 'c']

        l'opérateur variadique, indiqué devant une variable d'appel de fonction transforme TOUTES les variables écrite en un tableau de valeur

        function maFonction(variable, ...valeurs){
            valeurs.forEach(function(element){
                // traitement des valeurs ...valeurs
            });
        }

        /!\ ATTENTION /!\
        L'opérateur variadique ne peut être utilisé qu'une fois par appel de fonction et en tout dernier

        function maFonction(42, 'a', 'b', 'c');

        créer une fonction addition qui reçoit x paramètres et renvoi le résultat de l'addition des tous ces paramètres

        */

        function addition(...valeurs){
            let resultat = 0;
            for( value of valeurs){
                //resultat = resultat + value;
                //resultat += value; // plus préconisé par es6
                /*
                if(parseFloat(value)){
                    resultat = resultat + parseFloat(value);
                }
                */
                // et voilà le truc utile : le ternaire !
                // (condition)? résultat si condition vraie : resultat si condition fausse;
                resultat += (parseFloat(value))? parseFloat(value): 0;
            }
            return resultat;
        }

        console.log(addition(1,2,3,4,5,6,'toto',8,9));

        /*
        la structure de test try - catch permet de tester l'éxécution d'une fonction ou de code,
        si cela fonctionne on sort du try après avoir éxécuté son code, si dans le try une erreur est relevée, 
        elle est envoyée dans le catch, il faut donc la récupérer dans une variable qui est ensuite 
        affichable
        */

        function testTryCatch(nom, prenom, age){
            if(18 < age){
                let res = 'personne mineure';
            }else{
                let res = 'personne majeure';
            }
            return res;
        }

        try{
            console.log(testTryCatch('Duflot', 'Nicolas', 42));
        }catch(error){
            console.error(`il y a une erreur : ${error}`);
        }

        /*
        fonction de rappel (callback function) ou fonction anomyne;
        */

        let maFonctionAnonyme = function(name = null){
            if(null === name){
                return 'Hello Kitty';
            }else{
                return `Hello ${name}`;
            }
        };

        //console.log(maFonctionAnonyme);
        console.log(maFonctionAnonyme());
        console.log(maFonctionAnonyme('Nicolas'));

        /* 
        les fonction de callback anonymes peuvent être auto-éxécutée 
        (fonctionAnonyme(paramètres))(contenu des paramètres);
        */
        (
            (name = null)=>{
                if(null === name){
                    console.log('Hello Kitty');
                }else{
                    console.log(`Hello ${name}`);
                }
            }
        )(
            'Toto'
        );

    </script>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-light">
        <div class="container-fluid">
          <a class="navbar-brand" href="../">Home</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                  Introduction
                </a>
                <ul class="dropdown-menu">
                  <li><a class="dropdown-item" href="../introduction/index.html">Premiers Scripts</a></li>
                  <li><a class="dropdown-item" href="../introduction/tableaux.html">Les tableaux</a></li>
                  <li><a class="dropdown-item" href="../introduction/fonctions.html">Les fonctions</a></li>
                  <li><a class="dropdown-item" href="../introduction/destructuration.html">La destructuration</a></li>
                  <li><a class="dropdown-item" href="../introduction/storage.html">Storage</a></li>
                </ul>
              </li>
            </ul>
            <form class="d-flex" role="search">
              <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
              <button class="btn btn-outline-success" type="submit">Search</button>
            </form>
          </div>
        </div>
      </nav>
      <main class="container">
        <section class="row">
            <article class="col">
                <header>
                    <h2>Les fonctions</h2>
                </header>
                <main>
                    <p>
                        Tous est dans la console & le code
                    </p>
                </main>
            </article>
        </section>
      </main>
</body>
</html>